# GALLERY_DEMO_APP

## Протокол

Для клиент-серверного взаимодействия используются REST архитектура. Клиент отправляет HTTP запрос и получает HTTP ответ с JSON в body.

## Адрес сервера

```
drshnitsel.ru
```

## Ошибки

Если сервер не может выполнить запрос клиента возвращается JSON со статус кодом и описанием ошибки.

```javascript
{
    "result": "error",
    "error": string
}
```

## Запрос на регистрацию пользователя

Вернет ошибку если пользователь с таким логином уже существует. В случае успеха, создаст нового пользователя и вернет данные о нем включая токен.

```
POST /api/users
```

Параметры:

- `email` - желаемый логин пользователя
- `passwd` - выбранный пароль пользователя

Результат:

```json
{
    "id": 2,
    "email": "test@example.com",
    "token": "3b691581-efe8-43c9-9533-56c965a1aa1b"
}
```

## Запрос авторизации

Вернет ошибку если логин или пароль пользователя некорректны. В случае успеха вернет данные о пользователя включая токен.

```
POST /api/users/login
```

Параметры:

- `email` - логин пользователя
- `passwd` - пароль пользователя

Результат:

```json
{
    "id": 2,
    "email": "test@example.com",
    "token": "3b691581-efe8-43c9-9533-56c965a1aa1b"
}
```

## Запрос на разлогивание

Вернет ошибку пользователям с некорректным токеном. В случае успеха сменит токен пользователя.

```
POST /api/users/logout
```

Параметры:

- `token` - авторизационный токен пользователя в системе

Результат:

```json
{
    "result": true
}
```

## Запрос на смену пароля

Вернет ошибку пользователям с некорректным токеном или неверным старым паролем. В случае успеха сменит пароль пользователя.

```
PUT /api/users/password
```

Параметры:

- `token` - авторизационный токен пользователя в системе
- `passwd` - новый пароль пользователя
- `old_passwd` - старый пароль пользователя

Результат:

```json
{
    "result": true
}
```

## Запрос на удаление пользователя

Вернет ошибку пользователям с некорректным токеном. В случае успеха удалит пользователя.

```
DELETE /api/users
```

Параметры:

- `token` - авторизационный токен пользователя в системе

Результат:

```json
{
    "result": true
}
```

## Запрос на добавление медиа данных

Вернет ошибку пользователям с некорректным токеном. В случае успеха добавит файл и ссылку в коллекцию пользователя.

```
POST /api/users/media_data
```

Параметры:

- `token` - авторизационный токен пользователя в системе

Результат:

```json
{
    "id": 20007,
    "url": "https://meduza.io/",
    "file": "/uploads/development/media_datum/file/20007/cat.jpg"
}
```

## Запрос на показ медиа данных пользователя

Вернет ошибку пользователям с некорректным токеном. В случае успеха вернет коллекцию медиа данных пользователя.

```
GET /api/users/:user_id/media_data
```

Параметры:

- `token` - авторизационный токен пользователя в системе

Результат:

```json
{
    "media_data": [
        {
            "id": 2966,
            "url": "http://doyle.com/kathlyn",
            "file": "/uploads/development/media_datum/file/2966/file"
        },
        {
            "id": 3095,
            "url": "http://heidenreich.biz/arlene.fisher",
            "file": "/uploads/development/media_datum/file/3095/file"
        },
        {
            "id": 3824,
            "url": "http://daugherty.name/alysha_kuhn",
            "file": "/uploads/development/media_datum/file/3824/file"
        }
}
```
